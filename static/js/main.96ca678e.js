/*! For license information please see main.96ca678e.js.LICENSE.txt */
!function(){var e={524:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.makeNoise2D=void 0;var r=t(780),o=1/47,a=(Math.sqrt(3)-1)/2,i=(1/Math.sqrt(3)-1)/2;function u(e,n,t){return{dx:-n-e*a,dy:-t-e*a,xsb:n,ysb:t}}n.makeNoise2D=function(e){for(var n=[],t=0;t<s.length;t+=4){for(var d=c[s[t]],v=null,h=null,p=0;p<d.length;p+=3)h=u(d[p],d[p+1],d[p+2]),null===v?n[t/4]=h:v.next=h,v=h;h.next=u(s[t+1],s[t+2],s[t+3])}var m=[];for(t=0;t<l.length;t+=2)m[l[t]]=n[l[t+1]];var g=new Uint8Array(256),b=new Uint8Array(256),_=new Uint8Array(256);for(t=0;t<256;t++)_[t]=t;var y=new Uint32Array(1);for(y[0]=e,y=r.default(r.default(r.default(y))),t=255;t>=0;t--){y=r.default(y);var x=new Uint32Array(1);x[0]=(y[0]+31)%(t+1),x[0]<0&&(x[0]+=t+1),g[t]=_[x[0]],b[t]=14&g[t],_[x[0]]=_[t]}return function(e,n){for(var t=(e+n)*i,r=e+t,u=n+t,c=Math.floor(r),l=Math.floor(u),s=(c+l)*a,d=e-(c+s),v=n-(l+s),h=r-c,p=u-l,_=h+p,y=0,x=m[h-p+1|_<<1|_+p<<2|_+h<<4];void 0!==x;x=x.next){var w=d+x.dx,E=v+x.dy,A=2-w*w-E*E;if(A>0){var T=c+x.xsb,R=l+x.ysb,F=g[255&T],U=b[F+R&255];y+=A*A*A*A*(f[U]*w+f[U+1]*E)}}return y*o}};var c=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],f=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],l=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],s=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0]},645:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.makeNoise3D=void 0;var r=t(780),o=1/103,a=(Math.sqrt(4)-1)/3,i=(1/Math.sqrt(4)-1)/3;function u(e,n,t,r){return{dx:-n-e*a,dy:-t-e*a,dz:-r-e*a,xsb:n,ysb:t,zsb:r}}n.makeNoise3D=function(e){for(var n=[],t=0;t<s.length;t+=9){for(var d=c[s[t]],v=null,h=null,p=0;p<d.length;p+=4)h=u(d[p],d[p+1],d[p+2],d[p+3]),null===v?n[t/9]=h:v.next=h,v=h;h.next=u(s[t+1],s[t+2],s[t+3],s[t+4]),h.next.next=u(s[t+5],s[t+6],s[t+7],s[t+8])}var m=[];for(t=0;t<l.length;t+=2)m[l[t]]=n[l[t+1]];var g=new Uint8Array(256),b=new Uint8Array(256),_=new Uint8Array(256);for(t=0;t<256;t++)_[t]=t;var y=new Uint32Array(1);for(y[0]=e,y=r.default(r.default(r.default(y))),t=255;t>=0;t--){y=r.default(y);var x=new Uint32Array(1);x[0]=(y[0]+31)%(t+1),x[0]<0&&(x[0]+=t+1),g[t]=_[x[0]],b[t]=g[t]%24*3,_[x[0]]=_[t]}return function(e,n,t){for(var r=(e+n+t)*i,u=e+r,c=n+r,l=t+r,s=Math.floor(u),d=Math.floor(c),v=Math.floor(l),h=(s+d+v)*a,p=e-(s+h),_=n-(d+h),y=t-(v+h),x=u-s,w=c-d,E=l-v,A=x+w+E,T=0,R=m[w-E+1|x-w+1<<1|x-E+1<<2|A<<3|A+E<<5|A+w<<7|A+x<<9];void 0!==R;R=R.next){var F=p+R.dx,U=_+R.dy,D=y+R.dz,S=2-F*F-U*U-D*D;if(S>0){var P=s+R.xsb,B=d+R.ysb,L=v+R.zsb,C=g[255&P],k=g[C+B&255],M=b[k+L&255];T+=S*S*S*S*(f[M]*F+f[M+1]*U+f[M+2]*D)}}return T*o}};var c=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],f=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],l=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],s=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0]},322:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.makeNoise4D=void 0;var r=t(780),o=1/30,a=(Math.sqrt(5)-1)/4,i=(1/Math.sqrt(5)-1)/4;function u(e,n,t,r,o){return{dx:-n-e*a,dy:-t-e*a,dz:-r-e*a,dw:-o-e*a,xsb:n,ysb:t,zsb:r,wsb:o}}n.makeNoise4D=function(e){for(var n=[],t=0;t<s.length;t+=16){for(var d=c[s[t]],v=null,h=null,p=0;p<d.length;p+=5)h=u(d[p],d[p+1],d[p+2],d[p+3],d[p+4]),null===v?n[t/16]=h:v.next=h,v=h;h.next=u(s[t+1],s[t+2],s[t+3],s[t+4],s[t+5]),h.next.next=u(s[t+6],s[t+7],s[t+8],s[t+9],s[t+10]),h.next.next.next=u(s[t+11],s[t+12],s[t+13],s[t+14],s[t+15])}var m=[];for(t=0;t<l.length;t+=2)m[l[t]]=n[l[t+1]];var g=new Uint8Array(256),b=new Uint8Array(256),_=new Uint8Array(256);for(t=0;t<256;t++)_[t]=t;var y=new Uint32Array(1);for(y[0]=e,y=r.default(r.default(r.default(y))),t=255;t>=0;t--){y=r.default(y);var x=new Uint32Array(1);x[0]=(y[0]+31)%(t+1),x[0]<0&&(x[0]+=t+1),g[t]=_[x[0]],b[t]=252&g[t],_[x[0]]=_[t]}return function(e,n,t,r){for(var u=(e+n+t+r)*i,c=e+u,l=n+u,s=t+u,d=r+u,v=Math.floor(c),h=Math.floor(l),p=Math.floor(s),_=Math.floor(d),y=(v+h+p+_)*a,x=e-(v+y),w=n-(h+y),E=t-(p+y),A=r-(_+y),T=c-v,R=l-h,F=s-p,U=d-_,D=T+R+F+U,S=0,P=m[F-U+1|R-F+1<<1|R-U+1<<2|T-R+1<<3|T-F+1<<4|T-U+1<<5|D<<6|D+U<<8|D+F<<11|D+R<<14|D+T<<17];void 0!==P;P=P.next){var B=x+P.dx,L=w+P.dy,C=E+P.dz,k=A+P.dw,M=2-B*B-L*L-C*C-k*k;if(M>0){var O=v+P.xsb,j=h+P.ysb,I=p+P.zsb,z=_+P.wsb,G=g[255&O],W=g[G+j&255],X=g[W+I&255],N=b[X+z&255];S+=M*M*M*M*(f[N]*B+f[N+1]*L+f[N+2]*C+f[N+3]*k)}}return S*o}};var c=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],f=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],l=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],s=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1]},294:function(e,n,t){"use strict";n.DA=void 0;var r=t(524);Object.defineProperty(n,"DA",{enumerable:!0,get:function(){return r.makeNoise2D}});var o=t(645);var a=t(322)},780:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var n=new Uint32Array(1);return n[0]=1664525*e[0]+1013904223,n}},213:function(e,n,t){var r=t(39),o=t(35),a=t(518),i=t(578),u=t(707),c=t(152),f=t(359);f.alea=r,f.xor128=o,f.xorwow=a,f.xorshift7=i,f.xor4096=u,f.tychei=c,e.exports=f},39:function(e,n,t){var r;!function(e,o,a){function i(e){var n=this,t=function(){var e=4022871197,n=function(n){n=String(n);for(var t=0;t<n.length;t++){var r=.02519603282416938*(e+=n.charCodeAt(t));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return n}();n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=t(" "),n.s1=t(" "),n.s2=t(" "),n.s0-=t(e),n.s0<0&&(n.s0+=1),n.s1-=t(e),n.s1<0&&(n.s1+=1),n.s2-=t(e),n.s2<0&&(n.s2+=1),t=null}function u(e,n){return n.c=e.c,n.s0=e.s0,n.s1=e.s1,n.s2=e.s2,n}function c(e,n){var t=new i(e),r=n&&n.state,o=t.next;return o.int32=function(){return 4294967296*t.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&u(r,t),o.state=function(){return u(t,{})}),o}o&&o.exports?o.exports=c:t.amdD&&t.amdO?void 0===(r=function(){return c}.call(n,t,n,o))||(o.exports=r):this.alea=c}(0,e=t.nmd(e),t.amdD)},152:function(e,n,t){var r;!function(e,o,a){function i(e){var n=this,t="";n.next=function(){var e=n.b,t=n.c,r=n.d,o=n.a;return e=e<<25^e>>>7^t,t=t-r|0,r=r<<24^r>>>8^o,o=o-e|0,n.b=e=e<<20^e>>>12^t,n.c=t=t-r|0,n.d=r<<16^t>>>16^o,n.a=o-e|0},n.a=0,n.b=0,n.c=-1640531527,n.d=1367130551,e===Math.floor(e)?(n.a=e/4294967296|0,n.b=0|e):t+=e;for(var r=0;r<t.length+20;r++)n.b^=0|t.charCodeAt(r),n.next()}function u(e,n){return n.a=e.a,n.b=e.b,n.c=e.c,n.d=e.d,n}function c(e,n){var t=new i(e),r=n&&n.state,o=function(){return(t.next()>>>0)/4294967296};return o.double=function(){do{var e=((t.next()>>>11)+(t.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=t.next,o.quick=o,r&&("object"==typeof r&&u(r,t),o.state=function(){return u(t,{})}),o}o&&o.exports?o.exports=c:t.amdD&&t.amdO?void 0===(r=function(){return c}.call(n,t,n,o))||(o.exports=r):this.tychei=c}(0,e=t.nmd(e),t.amdD)},35:function(e,n,t){var r;!function(e,o,a){function i(e){var n=this,t="";n.x=0,n.y=0,n.z=0,n.w=0,n.next=function(){var e=n.x^n.x<<11;return n.x=n.y,n.y=n.z,n.z=n.w,n.w^=n.w>>>19^e^e>>>8},e===(0|e)?n.x=e:t+=e;for(var r=0;r<t.length+64;r++)n.x^=0|t.charCodeAt(r),n.next()}function u(e,n){return n.x=e.x,n.y=e.y,n.z=e.z,n.w=e.w,n}function c(e,n){var t=new i(e),r=n&&n.state,o=function(){return(t.next()>>>0)/4294967296};return o.double=function(){do{var e=((t.next()>>>11)+(t.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=t.next,o.quick=o,r&&("object"==typeof r&&u(r,t),o.state=function(){return u(t,{})}),o}o&&o.exports?o.exports=c:t.amdD&&t.amdO?void 0===(r=function(){return c}.call(n,t,n,o))||(o.exports=r):this.xor128=c}(0,e=t.nmd(e),t.amdD)},707:function(e,n,t){var r;!function(e,o,a){function i(e){var n=this;n.next=function(){var e,t,r=n.w,o=n.X,a=n.i;return n.w=r=r+1640531527|0,t=o[a+34&127],e=o[a=a+1&127],t^=t<<13,e^=e<<17,t^=t>>>15,e^=e>>>12,t=o[a]=t^e,n.i=a,t+(r^r>>>16)|0},function(e,n){var t,r,o,a,i,u=[],c=128;for(n===(0|n)?(r=n,n=null):(n+="\0",r=0,c=Math.max(c,n.length)),o=0,a=-32;a<c;++a)n&&(r^=n.charCodeAt((a+32)%n.length)),0===a&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(i=i+1640531527|0,o=0==(t=u[127&a]^=r+i)?o+1:0);for(o>=128&&(u[127&(n&&n.length||0)]=-1),o=127,a=512;a>0;--a)r=u[o+34&127],t=u[o=o+1&127],r^=r<<13,t^=t<<17,r^=r>>>15,t^=t>>>12,u[o]=r^t;e.w=i,e.X=u,e.i=o}(n,e)}function u(e,n){return n.i=e.i,n.w=e.w,n.X=e.X.slice(),n}function c(e,n){null==e&&(e=+new Date);var t=new i(e),r=n&&n.state,o=function(){return(t.next()>>>0)/4294967296};return o.double=function(){do{var e=((t.next()>>>11)+(t.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=t.next,o.quick=o,r&&(r.X&&u(r,t),o.state=function(){return u(t,{})}),o}o&&o.exports?o.exports=c:t.amdD&&t.amdO?void 0===(r=function(){return c}.call(n,t,n,o))||(o.exports=r):this.xor4096=c}(0,e=t.nmd(e),t.amdD)},578:function(e,n,t){var r;!function(e,o,a){function i(e){var n=this;n.next=function(){var e,t,r=n.x,o=n.i;return e=r[o],t=(e^=e>>>7)^e<<24,t^=(e=r[o+1&7])^e>>>10,t^=(e=r[o+3&7])^e>>>3,t^=(e=r[o+4&7])^e<<7,e=r[o+7&7],t^=(e^=e<<13)^e<<9,r[o]=t,n.i=o+1&7,t},function(e,n){var t,r=[];if(n===(0|n))r[0]=n;else for(n=""+n,t=0;t<n.length;++t)r[7&t]=r[7&t]<<15^n.charCodeAt(t)+r[t+1&7]<<13;for(;r.length<8;)r.push(0);for(t=0;t<8&&0===r[t];++t);for(8==t?r[7]=-1:r[t],e.x=r,e.i=0,t=256;t>0;--t)e.next()}(n,e)}function u(e,n){return n.x=e.x.slice(),n.i=e.i,n}function c(e,n){null==e&&(e=+new Date);var t=new i(e),r=n&&n.state,o=function(){return(t.next()>>>0)/4294967296};return o.double=function(){do{var e=((t.next()>>>11)+(t.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=t.next,o.quick=o,r&&(r.x&&u(r,t),o.state=function(){return u(t,{})}),o}o&&o.exports?o.exports=c:t.amdD&&t.amdO?void 0===(r=function(){return c}.call(n,t,n,o))||(o.exports=r):this.xorshift7=c}(0,e=t.nmd(e),t.amdD)},518:function(e,n,t){var r;!function(e,o,a){function i(e){var n=this,t="";n.next=function(){var e=n.x^n.x>>>2;return n.x=n.y,n.y=n.z,n.z=n.w,n.w=n.v,(n.d=n.d+362437|0)+(n.v=n.v^n.v<<4^e^e<<1)|0},n.x=0,n.y=0,n.z=0,n.w=0,n.v=0,e===(0|e)?n.x=e:t+=e;for(var r=0;r<t.length+64;r++)n.x^=0|t.charCodeAt(r),r==t.length&&(n.d=n.x<<10^n.x>>>4),n.next()}function u(e,n){return n.x=e.x,n.y=e.y,n.z=e.z,n.w=e.w,n.v=e.v,n.d=e.d,n}function c(e,n){var t=new i(e),r=n&&n.state,o=function(){return(t.next()>>>0)/4294967296};return o.double=function(){do{var e=((t.next()>>>11)+(t.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=t.next,o.quick=o,r&&("object"==typeof r&&u(r,t),o.state=function(){return u(t,{})}),o}o&&o.exports?o.exports=c:t.amdD&&t.amdO?void 0===(r=function(){return c}.call(n,t,n,o))||(o.exports=r):this.xorwow=c}(0,e=t.nmd(e),t.amdD)},359:function(e,n,t){var r;!function(o,a,i){var u,c=256,f=6,l="random",s=i.pow(c,f),d=i.pow(2,52),v=2*d,h=c-1;function p(e,n,t){var r=[],h=_(b((n=1==n?{entropy:!0}:n||{}).entropy?[e,y(a)]:null==e?function(){try{var e;return u&&(e=u.randomBytes)?e=e(c):(e=new Uint8Array(c),(o.crypto||o.msCrypto).getRandomValues(e)),y(e)}catch(r){var n=o.navigator,t=n&&n.plugins;return[+new Date,o,t,o.screen,y(a)]}}():e,3),r),p=new m(r),x=function(){for(var e=p.g(f),n=s,t=0;e<d;)e=(e+t)*c,n*=c,t=p.g(1);for(;e>=v;)e/=2,n/=2,t>>>=1;return(e+t)/n};return x.int32=function(){return 0|p.g(4)},x.quick=function(){return p.g(4)/4294967296},x.double=x,_(y(p.S),a),(n.pass||t||function(e,n,t,r){return r&&(r.S&&g(r,p),e.state=function(){return g(p,{})}),t?(i[l]=e,n):e})(x,h,"global"in n?n.global:this==i,n.state)}function m(e){var n,t=e.length,r=this,o=0,a=r.i=r.j=0,i=r.S=[];for(t||(e=[t++]);o<c;)i[o]=o++;for(o=0;o<c;o++)i[o]=i[a=h&a+e[o%t]+(n=i[o])],i[a]=n;(r.g=function(e){for(var n,t=0,o=r.i,a=r.j,i=r.S;e--;)n=i[o=h&o+1],t=t*c+i[h&(i[o]=i[a=h&a+n])+(i[a]=n)];return r.i=o,r.j=a,t})(c)}function g(e,n){return n.i=e.i,n.j=e.j,n.S=e.S.slice(),n}function b(e,n){var t,r=[],o=typeof e;if(n&&"object"==o)for(t in e)try{r.push(b(e[t],n-1))}catch(a){}return r.length?r:"string"==o?e:e+"\0"}function _(e,n){for(var t,r=e+"",o=0;o<r.length;)n[h&o]=h&(t^=19*n[h&o])+r.charCodeAt(o++);return y(n)}function y(e){return String.fromCharCode.apply(0,e)}if(_(i.random(),a),e.exports){e.exports=p;try{u=t(42)}catch(x){}}else void 0===(r=function(){return p}.call(n,t,n,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},42:function(){}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var a=n[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}t.amdD=function(){throw new Error("define cannot be used indirect")},t.amdO={},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,{a:n}),n},t.d=function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(){n=function(){return t};var t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,n,t){e[n]=t.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",f=i.toStringTag||"@@toStringTag";function l(e,n,t){return Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[n]}try{l({},"")}catch(S){l=function(e,n,t){return e[n]=t}}function s(e,n,t,r){var o=n&&n.prototype instanceof h?n:h,i=Object.create(o.prototype),u=new F(r||[]);return a(i,"_invoke",{value:E(e,t,u)}),i}function d(e,n,t){try{return{type:"normal",arg:e.call(n,t)}}catch(S){return{type:"throw",arg:S}}}t.wrap=s;var v={};function h(){}function p(){}function m(){}var g={};l(g,u,(function(){return this}));var b=Object.getPrototypeOf,_=b&&b(b(U([])));_&&_!==r&&o.call(_,u)&&(g=_);var y=m.prototype=h.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(n){l(e,n,(function(e){return this._invoke(n,e)}))}))}function w(n,t){function r(a,i,u,c){var f=d(n[a],n,i);if("throw"!==f.type){var l=f.arg,s=l.value;return s&&"object"==e(s)&&o.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,u,c)}),(function(e){r("throw",e,u,c)})):t.resolve(s).then((function(e){l.value=e,u(l)}),(function(e){return r("throw",e,u,c)}))}c(f.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function E(e,n,t){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return D()}for(t.method=o,t.arg=a;;){var i=t.delegate;if(i){var u=A(i,t);if(u){if(u===v)continue;return u}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===r)throw r="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);r="executing";var c=d(e,n,t);if("normal"===c.type){if(r=t.done?"completed":"suspendedYield",c.arg===v)continue;return{value:c.arg,done:t.done}}"throw"===c.type&&(r="completed",t.method="throw",t.arg=c.arg)}}}function A(e,n){var t=n.method,r=e.iterator[t];if(void 0===r)return n.delegate=null,"throw"===t&&e.iterator.return&&(n.method="return",n.arg=void 0,A(e,n),"throw"===n.method)||"return"!==t&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+t+"' method")),v;var o=d(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var n={tryLoc:e[0]};1 in e&&(n.catchLoc=e[1]),2 in e&&(n.finallyLoc=e[2],n.afterLoc=e[3]),this.tryEntries.push(n)}function R(e){var n=e.completion||{};n.type="normal",delete n.arg,e.completion=n}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function U(e){if(e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var t=-1,r=function n(){for(;++t<e.length;)if(o.call(e,t))return n.value=e[t],n.done=!1,n;return n.value=void 0,n.done=!0,n};return r.next=r}}return{next:D}}function D(){return{value:void 0,done:!0}}return p.prototype=m,a(y,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,f,"GeneratorFunction"),t.isGeneratorFunction=function(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,f,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},x(w.prototype),l(w.prototype,c,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(y),l(y,f,"Generator"),l(y,u,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var n=Object(e),t=[];for(var r in n)t.push(r);return t.reverse(),function e(){for(;t.length;){var r=t.pop();if(r in n)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=U,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function t(t,r){return i.type="throw",i.arg=e,n.next=t,r&&(n.method="next",n.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],i=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function(e,n){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),v},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),R(t),v}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.tryLoc===e){var r=t.completion;if("throw"===r.type){var o=r.arg;R(t)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,t){return this.delegate={iterator:U(e),resultName:n,nextLoc:t},"next"===this.method&&(this.arg=void 0),v}},t}function r(n){var t=function(n,t){if("object"!==e(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r.call(n,t||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"===e(t)?t:String(t)}function o(e,n,t){return(n=r(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function u(e,n,t,r,o,a,i){try{var u=e[a](i),c=u.value}catch(f){return void t(f)}u.done?n(c):Promise.resolve(c).then(r,o)}function c(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function f(e,n){if(e){if("string"===typeof e)return c(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(e,n):void 0}}function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function d(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function v(e,n,t){return n&&d(e.prototype,n),t&&d(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var h=t(213),p=t.n(h);function m(e,n,t,r){var o=document.createElement("canvas");o.setAttribute("width",e.toString()),o.setAttribute("height",n.toString()),r&&r.appendChild(o);var a=o.getContext("2d",t);if(!a)throw new Error("failed to get ctx");return a}function g(e,n,t,r){var o=document.createElement("canvas");o.setAttribute("width",e.toString()),o.setAttribute("height",n.toString()),r&&r.appendChild(o);var a=o.getContext("webgl2",t);if(!a)throw new Error("failed to get ctx");return a}function b(e,n){var t=null===n?0:n.length;if(!t)return[];for(var r=-1,o=t-1,a=n.slice(0);++r<t;){var i=r+Math.floor(e()*(o-r+1)),u=a[i];a[i]=a[r],a[r]=u}return a}var _=function(e,n){return n[~~function(e,n,t){return e()*(t-n)+n}(e,0,n.length)]};function y(e,n){for(var t=n.reduce((function(e,n){return e+n[0]}),0),r=e(),o=0,a=n[0][1],i=0;i<n.length&&o<=r;i++)a=n[i][1],o+=n[i][0]/t;return a}function x(e){var n,t,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;do{n=(t=2*e()-1)*t+(r=2*e()-1)*r}while(n>=1);return t*(n=Math.sqrt(-2*Math.log(n)/n))*o}function w(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,i,u=[],c=!0,f=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=a.call(t)).done)&&(u.push(r.value),u.length!==n);c=!0);}catch(l){f=!0,o=l}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(f)throw o}}return u}}(e,n)||f(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var E="\n";function A(e){var n=new Error("(regl) "+e);throw console.error(n),n}function T(e){return e?": "+e:""}function R(e,n){switch(n){case"number":return"number"===typeof e;case"object":return"object"===typeof e;case"string":return"string"===typeof e;case"boolean":return"boolean"===typeof e;case"function":return"function"===typeof e;case"undefined":return"undefined"===typeof e;case"symbol":return"symbol"===typeof e}}function F(e,n){for(e+="";e.length<n;)e=" "+e;return e}function U(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function D(e,n){this.number=e,this.line=n,this.errors=[]}function S(e,n,t){this.file=e,this.line=n,this.message=t}function P(){var e=new Error,n=(e.stack||e).toString(),t=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(n);if(t)return t[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(n);return r?r[1]:"unknown"}function B(e,n){var t,r=e.split("\n"),o=1,a=0,i={unknown:new U,0:new U};i.unknown.name=i[0].name=n||P(),i.unknown.lines.push(new D(0,""));for(var u=0;u<r.length;++u){var c=r[u],f=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(c);if(f)switch(f[1]){case"line":var l=/(\d+)(\s+\d+)?/.exec(f[2]);l&&(o=0|l[1],l[2]&&((a=0|l[2])in i||(i[a]=new U)));break;case"define":var s=/SHADER_NAME(_B64)?\s+(.*)$/.exec(f[2]);s&&(i[a].name=s[1]?(t=s[2],"undefined"!==typeof atob?atob(t):"base64:"+t):s[2])}i[a].lines.push(new D(o++,c))}return Object.keys(i).forEach((function(e){var n=i[e];n.lines.forEach((function(e){n.index[e.number]=e}))})),i}function L(e,n,t,r,o){if(!e.getShaderParameter(n,e.COMPILE_STATUS)){var a=e.getShaderInfoLog(n),i=r===e.FRAGMENT_SHADER?"fragment":"vertex";!function(e,n,t,r){R(e,n)||C("invalid parameter type"+T(t)+". expected "+n+", got "+typeof e,r||P())}(t,"string",i+" shader source must be a string",o);var u=B(t,o),c=function(e){var n=[];return e.split("\n").forEach((function(e){if(!(e.length<5)){var t=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(e);t?n.push(new S(0|t[1],0|t[2],t[3].trim())):e.length>0&&n.push(new S("unknown",0,e))}})),n}(a);throw function(e,n){n.forEach((function(n){var t=e[n.file];if(t){var r=t.index[n.line];if(r)return r.errors.push(n),void(t.hasErrors=!0)}e.unknown.hasErrors=!0,e.unknown.lines[0].errors.push(n)}))}(u,c),Object.keys(u).forEach((function(e){var n=u[e];if(n.hasErrors){var t,r=[""],o=[""];if(i("file number "+e+": "+n.name+"\n","color:red;text-decoration:underline;font-weight:bold"),n.lines.forEach((function(e){if(e.errors.length>0){i(F(e.number,4)+"|  ","background-color:yellow; font-weight:bold"),i(e.line+E,"color:red; background-color:yellow; font-weight:bold");var n=0;e.errors.forEach((function(r){var o;t=null!==(o=t)&&void 0!==o?o:e.number;var a=r.message,u=/^\s*'(.*)'\s*:\s*(.*)$/.exec(a);if(u){var c=u[1];if(a=u[2],"assign"===c)c="=";n=Math.max(e.line.indexOf(c,n),0)}else n=0;i(F("| ",6)),i(F("^^^",n+3)+E,"font-weight:bold"),i(F("| ",6)),i(a+E,"font-weight:bold")})),i(F("| ",6)+E)}else i(F(e.number,4)+"|  "),i(e.line+E,"color:red")})),"undefined"===typeof document||window.chrome){var a=r.join("").split("\n");console.groupCollapsed("full"),console.log(a.join("\n")),console.groupEnd(),console.log(a.slice(t-4,t+4).join("\n"))}else o[0]=r.join("%c"),console.log.apply(console,o)}function i(e,n){r.push(e),o.push(n||"")}})),new Error("Error compiling "+i+" shader, "+u[0].name)}}function C(e,n){var t=function(){var e=new Error,n=(e.stack||e).toString(),t=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(n);if(t)return t[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(n);return r?r[1]:"unknown"}();A(e+" in command "+(n||P())+("unknown"===t?"":" called from "+t))}var k,M=5126,O=32819,j=32820,I=33635,z=34042,G={};function W(e,n,t){var r=X(e,e.VERTEX_SHADER,n),o=X(e,e.FRAGMENT_SHADER,t),a=e.createProgram();if(!a)throw new Error("failed to create program");if(e.attachShader(a,r),e.attachShader(a,o),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new Error("Unable to initialize the shader program: ".concat(e.getProgramInfoLog(a)));return a}function X(e,n,t){var r=e.createShader(n);if(!r)throw new Error("failed to create shader");return e.shaderSource(r,t),e.compileShader(r),L(e,r,t,n,void 0),r}function N(e){var n=e.createTexture();if(!n)throw new Error("failed to create texture");return e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n}function q(e,n,t){var r=w(n,2),o=r[0],a=r[1],i=!1;"function"===typeof t&&(t=t()),t||(i=!0,t=N(e),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,o,a,0,e.RGBA,e.FLOAT,null));var u=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,u),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),i&&(e.viewport(0,0,o,a),e.clear(e.COLOR_BUFFER_BIT)),{fbo:u,texture:t,get width(){return o},get height(){return a}}}function Y(){var e=[q.apply(void 0,arguments),q.apply(void 0,arguments)],n=0;return{get src(){return e[n]},get dest(){return e[1^n]},get width(){return this.src.width},get height(){return this.src.height},swap:function(){n^=1}}}function H(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.getUniformLocation(n,t),a=e.getError();return a?console.error(a):o||r||console.error("no location found for uniform ".concat(t)),o}function K(e){for(var n=0,t=0,r=e.length;t<r;t++){n=(n<<5)-n+e.charCodeAt(t),n|=0}return n.toString(16)}function V(){if(!k){var e=document.getElementById("root");if(e&&!0===window.injectEnabled){k=document.createElement("pre"),e.appendChild(k),e.style.flexDirection="column",k.style.textAlign="center",k.style.fontSize="24px";var n="75vmin",t=document.querySelector("canvas");t&&(t.style.height=n,t.style.width=n,function(e){var n=e.toDataURL("image/png").replace("image/png","image/octet-stream"),t=document.createElement("a");t.href=n,t.setAttribute("download","follow_my_lead.png"),t.innerHTML="download";var r=document.getElementById("root");if(!r)throw new Error("missing root");r.appendChild(t)}(t))}}}function $(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(V(),k&&!["land","dep","age"].includes(null!==n&&void 0!==n?n:"")){var t="";t+=e.toString(),void 0!==n&&(t+="[".concat(n,"]"));var r=function(e){var n=~~(360*p()(e)());return"hsl(".concat(n,",70%,70%)")}(t);k.innerHTML+='<span style="background: '.concat(r,';">').concat(t,"\n</span>")}}G[5120]=G[5121]=1,G[5122]=G[5123]=G[36193]=G[I]=G[O]=G[j]=2,G[5124]=G[5125]=G[M]=G[z]=4;var J="#version 300 es\n  precision highp float;\n  uniform sampler2D u_buffer;\n  uniform vec2 u_dim;\n  uniform vec2 u_dim_screen;\n  uniform float u_point_size;\n\n  out vec4 v_data;\n\n  void main() {\n    int width = int(u_dim.x);\n    int y = gl_VertexID / width;\n    int x = gl_VertexID - y * width;\n    vec2 uv = vec2(float(x) + 0.5, float(y) + 0.5) / u_dim;\n    \n    // pos is in pixel space\n    vec2 pos = texture(u_buffer, uv).rg;\n    // floor it and add 0.5 so that we're on a half pixel\n    // this seems to be necessary to get my mac/ipad behaving the same\n    pos = floor(pos) + vec2(0.5);\n    // convert from pixel space not normalized (0-1) space\n    pos = pos / u_dim_screen;\n    \n    gl_Position = vec4(pos * 2. - 1., 0., 1.);\n    gl_PointSize = u_point_size;\n  }",Q="#version 300 es\n  precision highp float;\n  uniform vec3 u_amount;\n  out vec4 out_color;\n\n  void main() {\n    out_color = vec4(u_amount, 1.);\n  }";var Z="#version 300 es\n  precision highp float;\n  in vec4 aPos;\n  out vec2 v_uv;\n  void main() {\n    v_uv = (aPos.xy + 1.) / 2.;\n    gl_Position = vec4(aPos.x, aPos.y, 0., 1.);\n  }\n",ee=function(e){return"#version 300 es\n    precision highp float;\n    uniform sampler2D u_prev;\n    uniform sampler2D u_deposit;\n    uniform sampler2D u_landscape;\n    uniform vec2 u_texsize;\n    uniform float u_decay;\n    uniform bool u_hack;\n\n    in vec2 v_uv;\n    out vec4 out_color;\n\n    const float scale = 1024.;\n\n    ivec3 current_val(vec2 uv) {\n      uv = clamp(uv, 0., 1.0);\n      vec3 prev = texture(u_prev, uv).rgb;\n      vec3 dep = texture(u_deposit, uv).rgb;\n      return ivec3((prev + dep) * scale);\n    }\n\n    void main() {\n      ivec3 sum = ivec3(0);\n      int sum_weights = 0;\n\n      ".concat(e?"\n          const int weights[9] = int[9](\n            1, 3, 1,\n            3, 10, 3,\n            1, 3, 1);\n          \n          const int radius = 1;\n          for (int i = -radius; i <= radius; i += 1) {\n            for (int j = -radius; j <= radius; j += 1) {\n              vec2 pos = v_uv + vec2(float(i), float(j)) * u_texsize;\n              vec2 clamped = clamp(pos, 0., 1.);\n              vec2 diff = abs(pos - clamped);\n              int inbounds = int(step(diff.x + diff.y, 0.));\n              \n              int land = int(scale * (1. - texture(u_landscape, clamped).r));\n            \n              int weight_index = (j + 1) * 3 + (i + 1);\n              int weight = inbounds * weights[weight_index]*land;\n              ivec3 val = current_val(clamped) * weight;\n\n              // we use max to prevent addition from overflowing and giving us\n              // negative values. This approach does mean that as density gets\n              // especially large, our diffusion calculation is technically wrong\n              // (i.e. we will get increased decay)\n              sum = max(sum, sum + val);\n              sum_weights = max(sum_weights, sum_weights + weight);\n            }\n          }\n\n          // convert back to floats\n          vec3 diffused = sum_weights == 0\n            ? vec3(current_val(v_uv))\n            : vec3(sum / sum_weights);\n          diffused = diffused * u_decay / scale;\n          \n          out_color = vec4(diffused, 1.);":"out_color = vec4(vec3(current_val(v_uv)) * u_decay / scale, 1.);","\n    }\n  ")},ne=t(294),te=function(e,n,t){return e+(n-e)*t},re=function(e,n){return(e+n)%n};function oe(e,n,t){return[e[0]+Math.cos(n)*t,e[1]+Math.sin(n)*t]}function ae(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512,t=function(e,n,t,r){for(var o=new Float32Array(r*t*4),a=0;a<n.length;a++){var i=w(n[a],3),u=i[0],c=i[1],f=i[2];o[4*a+0]=u,o[4*a+1]=c,o[4*a+2]=re(f,2*Math.PI),o[4*a+3]=0}e.activeTexture(e.TEXTURE0+0);var l=N(e);return e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,t,r,0,e.RGBA,e.FLOAT,o),l}(e,Array.from({length:n},(function(e,t){return[Math.sin(t/(n-1)*2*Math.PI),Math.cos(t/(n-1)*2*Math.PI),0]})),n,1);return{texture:t,glsl:"\n    const float cgPI = ".concat(n,".;\n    const float TAU = floor(6.283185307179586 * cgPI) / cgPI;\n    const float PI = floor(3.141592653589793 * cgPI) / cgPI;\n\n    float sin2(float radians) {\n      // initially I'd used fract instead of mod(x, 1), but that seemed to give\n      // different precision for the result of negative numbers on different gpus\n      // sometimes\n      float pctTau = mod(radians / TAU, 1.);\n      pctTau = (floor(pctTau * ").concat(n,".) + 0.5) / ").concat(n,".;\n      return texture(u_sincos, vec2(pctTau, 0.)).x;\n    }\n\n    float sin_int(int index) {\n      return texture(u_sincos, vec2(float(index) / ").concat(n,"., 0.)).x;\n    }\n\n    float cos2(float radians) {\n      float pctTau = mod(radians / TAU, 1.);\n      pctTau = (floor(pctTau * ").concat(n,".) + 0.5) / ").concat(n,".;\n      return texture(u_sincos, vec2(pctTau, 0.)).y;\n    }"),numBuckets:n}}var ie=function(e){var n=e.toString();return n.includes(".")||(n+="."),n},ue="\n  float rand(vec2 co){  \n    return texture(u_random, fract(co)).x;\n  }",ce=function(e,n){return Math.floor(e*n)/n};function fe(e,n,t,r,o){var a=(1e3*t()).toString(),i=p()(a),u=o?4/128:0,c=ae(e,512),f={"radial gradient":se(a,u),noise:de(a,u),"central circle":ve(a,u),"central square":he(a,u),"corner circles":pe(a,u),lines:me(a,u),grid:ge(a,u),"linear gradient":be(a,u),triangles:_e(a,u),"grid circles":ye(a,u),"sin waves":xe(a,u,c),checkerboard:we(a,u),steps:Ee(a,u)}[r](),s=e.createBuffer(),d=q(e,n,null),v=W(e,"#version 300 es\n    precision highp float;\n    in vec4 aPos;\n    out vec2 v_uv;\n    void main() {\n      v_uv = (aPos.xy + 1.) / 2.;\n      gl_Position = vec4(aPos.x, aPos.y, 0., 1.);\n    }",f);e.useProgram(v),e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,3,-1,-1,3,-1]),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,s),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(0),e.useProgram(v);var h=H(e,v,"u_random",!0);h&&(e.uniform1i(h,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,function(e,n,t){for(var r=p()(t),o=new Float32Array(n[0]*n[1]*4),a=0;a<o.length;a++)o[a]=r();e.activeTexture(e.TEXTURE0+0);var i=N(e);return e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D.apply(e,[e.TEXTURE_2D,0,e.RGBA32F].concat(l(n),[0,e.RGBA,e.FLOAT,o])),i}(e,n,(1e4*i()).toString())));var g=H(e,v,"u_sincos",!0);if(g&&(e.uniform1i(g,1),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,c.texture)),"noise"===r){var b=H(e,v,"u_noise");e.uniform1i(b,2),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,function(e,n,t,r){for(var o=p()(t),a=o(),i=te(1,5,a),u=te(.3,.05,a),c=(0,ne.DA)(1e4*o()),f=~~(100*o()),s=function(e,n,t){return.5*(c(e*t+f,n*t+f)+1)+.25*(c(e*t*2+f,n*t*2+f)+1)+.03*te(-1,1,o())},d=new Float32Array(n[0]*n[1]*4),v=0;v<n[1];v++)for(var h=0;h<n[0];h++){var m=4*(v*n[0]+h),g=s(h/n[0],v/n[1],i)*u;d[m+0]=g,d[m+1]=g,d[m+2]=g,d[m+3]=1}e.activeTexture(e.TEXTURE0+r);var b=N(e);return e.texImage2D.apply(e,[e.TEXTURE_2D,0,e.RGBA32F].concat(l(n),[0,e.RGBA,e.FLOAT,d])),b}(e,n,a,2))}e.bindFramebuffer(e.FRAMEBUFFER,d.fbo),e.viewport(0,0,d.width,d.height),e.drawArrays(e.TRIANGLES,0,3);var _=w(n,2),y=m(_[0],_[1],{},document.body);return y.canvas.setAttribute("id","l"),y.canvas.style.display="none",e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,d.width,d.height),e.drawArrays(e.TRIANGLES,0,3),y.drawImage(e.canvas,0,0),{get texture(){return d.texture},debug:function(){e.bindFramebuffer(e.FRAMEBUFFER,d.fbo);var n=new Float32Array(d.width*d.height*4);e.readPixels(0,0,d.width,d.height,e.RGBA,e.FLOAT,n);var t=K(n.join(","));return $(t,"land"),t}}}function le(e,n){var t=0!==e,r="\n    float borderWidth = ".concat(ie(e),";\n    vec2 uvr = uv;\n    if (uv.x + uv.y > 1.) {\n        uvr = vec2(1. - uv.y, 1.-uv.x);\n    }\n    float minxy = min(uvr.x, uvr.y);\n    if (minxy < borderWidth) {\n      float borderLeft = 1. - min(minxy / borderWidth, 1.);\n      val = borderLeft;\n    }\n  ");return t||(r=""),"#version 300 es\n    precision highp float;\n    uniform sampler2D u_sincos;\n    uniform sampler2D u_random;\n    uniform sampler2D u_noise;\n    in vec2 v_uv;\n    out vec4 out_color;\n\n    ".concat(n,"\n\n    void main() {\n      vec2 uv = v_uv;\n\n      // I had a gen_val return a vec3 so that i could use the yz to pass data\n      // for debugging as I was developing.\n      vec3 val3 = gen_val(uv);\n      float val = clamp(val3.x, 0., 1.);\n\n      ").concat(r,"\n\n      val = floor(val * 1024.) / 1024.;\n\n      out_color = vec4(val, val3.yz, 1.);\n    }")}function se(e,n){return function(){var t=p()(e)()<.5;return le(n,"\n      const float max_dist = 0.70703125;\n      vec3 gen_val(vec2 uv) {\n        float d = distance(vec2(0.5), v_uv);\n        d = floor(d * 1024.) / 1024.;\n        float val = clamp(d / max_dist, 0., 1.);\n        \n        ".concat(t?"":"val = 1. - val;\n               val = floor(val * 1024.) / 1024.;","\n        \n        return vec3(val, 0., 0.);\n      }"))}}function de(e,n){return function(){return le(n,"\n      vec3 gen_val(vec2 uv) {\n        float val = texture(u_noise, uv).x;\n        return vec3(val, 0., 0.);\n      }")}}function ve(e,n){return function(){var t=p()(e),r=te(.03,.08,t())/2,o=te(.25,.4,t());return le(n,"\n      vec3 gen_val(vec2 uv) {\n        float radius = ".concat(ie(o),";\n        float lineWidth = ").concat(ie(r),";\n        float d = distance(vec2(0.5), v_uv);\n        float val = step(radius - lineWidth, d) * step(d, radius + lineWidth);\n        return vec3(val * 0.5, 0., 0.);\n      }"))}}function he(e,n){return function(){var t=p()(e),r=te(.03,.08,t())/2,o=te(.25,.4,t());return le(n,"\n      vec3 gen_val(vec2 uv) {\n        float radius = ".concat(ie(o),";\n        float lineWidth = ").concat(ie(r),";\n        vec2 d = abs(uv - vec2(0.5));\n        float val = step(radius - lineWidth, max(d.x, d.y)) *\n          step(max(d.x, d.y), radius + lineWidth);\n        return vec3(val * 0.5);\n      }"))}}function pe(e,n){return function(){var t=p()(e),r=ce(te(.015,.03,t()),Math.pow(2,13)),o=ce(te(.5,.9,t()),Math.pow(2,13)),a=_(t,[.25,.5,1]);return le(n,"\n      // const float cg = pow(10., 7.);\n      vec3 gen_val(vec2 uv) {\n        float radius = ".concat(ie(o),";\n        float lineWidth = ").concat(ie(r),";\n        const vec2 corners[4] = vec2[4](\n          vec2(0.),\n          vec2(1.),\n          vec2(0., 1.),\n          vec2(1., 0.)\n        );\n        float val = 0.;\n\n        for (int i = 0; i < 4; i++) {\n          float d = distance(corners[i], v_uv);\n          val += step(radius - lineWidth, d) * step(d, radius + lineWidth);\n        }\n        \n        return vec3(val * ").concat(ie(a),", 0., 0.);\n      }"))}}function me(e,n){return function(){var t=p()(e),r=~~te(2,12,Math.pow(t(),1.5)),o=te(.003,.03,Math.pow(t(),3)),a=t()<.5;return le(n,"\n      vec3 gen_val(vec2 uv) {\n        float numCells = ".concat(ie(r),";\n        float borderWidth = ").concat(ie(n),";\n        float lw = ").concat(ie(o),";\n        if (").concat(a,") {\n          uv = uv.yx;\n        }\n        uv = (uv - vec2(borderWidth)) / (1. - 2. * vec2(borderWidth));\n        uv = floor(uv * 4096.) / 4096.;\n\n        float x = fract(uv.x * numCells + 0.5);\n        float d = distance(x, 0.5);\n        float val = step(d, lw/2.*numCells) * step(distance(uv.x, 0.5) * 2., 1. - lw);\n        return vec3(val * 0.5, 0., 0.);\n      }"))}}function ge(e,n){return function(){var t=p()(e),r=[~~te(3,15,t()),~~te(3,15,t())];t()<.4&&(r[1]=r[0]);var o=t()<.8?0:te(.5,.8,t());return le(n,"\n      ".concat(ue,"\n      vec3 gen_val(vec2 uv) {\n        float borderWidth = ").concat(ie(n),";\n        vec2 numCells = vec2(").concat(ie(r[0]),", ").concat(ie(r[1]),");\n        float skipPct = ").concat(ie(o),";\n\n\n        uv = (uv - vec2(borderWidth)) / (1. - 2. * vec2(borderWidth));\n        uv = floor(uv * 4096.) / 4096.;\n\n        vec2 coord = floor(uv * numCells) / numCells;\n        float val = rand(coord) * 0.5 * step(skipPct, rand(fract(coord + 1.23)));\n        return vec3(val, 0., 0.);\n      }"))}}function be(e,n){return function(){var t=p()(e),r=_(t,["","uv.x = 1. - uv.x;"]),o=_(t,["","uv.y = 1. - uv.y;"]),a=_(t,["","uv.x = uv.y;","uv.y = uv.x;"]);return le(n,"\n      ".concat(ue,"\n      vec3 gen_val(vec2 uv) {\n        ").concat(r,"\n        ").concat(o,"\n        ").concat(a,"   \n        return vec3((uv.x + uv.y) / 2., 0., 0.);\n      }"))}}function _e(e,n){return function(){var t=p()(e),r=_(t,[-1,1,0,0,0]),o=~~te(3,15,t());return le(n,"\n      ".concat(ue,"\n      vec3 gen_val(vec2 uv) {\n        float numCells = ").concat(ie(o),";\n        float borderWidth = ").concat(ie(n),";\n        float flip = ").concat(ie(r),";\n\n        uv = (uv - vec2(borderWidth)) / (1. - 2. * vec2(borderWidth));\n        uv = floor(uv * 4096.) / 4096.;\n\n        vec2 coord = floor(uv * numCells) / numCells;\n        uv = fract(uv * numCells);\n\n        float r = rand(coord);\n        if (r < 0.5 + flip) {\n          uv.x = 1. - uv.x;\n        }\n\n        float val = rand(coord + 7.77 * (step(uv.x, uv.y)));\n        return vec3(val, 0., 0.);\n      }"))}}function ye(e,n){return function(){for(var t=p()(e),r=~~te(5,25,t()),o=1/r,a=te(.1,.16,t())*o,i=y(t,[[10,0],[2,.3*o],[2,.5*a]]),u=[],c=0;c<r;c++)for(var f=0;f<r;f++)u.push([c*o+o/2+x(t,i),f*o+o/2+x(t,i)]);var l=u.map((function(e){return"vec2(".concat(ie(e[0]),",").concat(ie(e[1]),")")}));return le(n,"\n      vec3 gen_val(vec2 uv) {\n        float numCells = ".concat(ie(r),";\n        float radius = ").concat(ie(a),";\n        float borderWidth = ").concat(ie(n),";\n\n        uv = (uv - vec2(borderWidth)) / (1. - 2. * vec2(borderWidth));\n        uv = floor(uv * 4096.) / 4096.;\n        \n        float val = 0.;\n        float dist = 0.;\n        vec2 diff = vec2(0.);\n        float hypot = 0.;\n        \n        const float cg = pow(2., 13.);\n        \n        // Take a fairly hacky approach of calculating distance, as without\n        // this, I was ending up with different values of sqrt on ipad\n        ").concat(l.map((function(e){return"diff = uv - ".concat(e,";\n              hypot = diff.x * diff.x + diff.y * diff.y;\n              hypot = floor(hypot * cg) / cg;\n              dist = sqrt(hypot);\n              dist = floor(dist * cg) / cg;\n              val += 0.15 * (1. - smoothstep(radius*0.75, radius * 1.5, dist));")})).join("\n"),"\n\n        return vec3(val, 0., 0.);\n      }"))}}function xe(e,n,t){return function(){var r=p()(e),o=~~te(3,12,Math.pow(r(),2)),a=te(.003,.01,Math.pow(r(),2)),i=r()<.5,u=~~te(1,5,r()),c=te(.01,.05,Math.pow(r(),2));return le(n,"\n      ".concat(t.glsl,"\n      const float cg = 4096.;\n      vec3 gen_val(vec2 uv) {\n        float numCells = ").concat(ie(o),";\n        float borderWidth = ").concat(ie(n),";\n        float lw = ").concat(ie(a),";\n        float freq = ").concat(ie(u),";\n        float amp = ").concat(ie(c),";\n\n        if (").concat(i,") {\n          uv = uv.yx;\n        }\n        \n        uv = (uv - vec2(borderWidth)) / (1. - 2. * vec2(borderWidth));\n        \n        uv.x += sin2(uv.y * TAU * freq) * amp;\n        uv = floor(uv * cg) / cg;\n        \n        float x = fract(uv.x * numCells + 0.5);\n        x = floor(x * cg) / cg;\n        float d = distance(x, 0.5);\n        d = floor(d * cg) / cg;\n        \n        float lwCell = lw/2.*numCells;\n        \n        float sm = smoothstep(lwCell*0.75, lwCell * 1.5, d);\n        float val = (1. - sm) *\n          step(distance(uv.x, 0.5) * 2., 1. - lw * 2.);\n\n        return vec3(val * 0.5, 0., 0.);\n      }"))}}function we(e,n){return function(){var t=p()(e),r=~~te(6,10,t());return le(n,"\n      vec3 gen_val(vec2 uv) {\n        float numCells = ".concat(ie(r),";\n        float borderWidth = ").concat(ie(n),";\n        \n        uv = (uv - vec2(borderWidth)) / (1. - 2. * vec2(borderWidth));\n        uv = floor(uv * 4096.) / 4096.;\n        \n        vec2 coord = floor(uv * numCells);\n        float val = step(mod((coord.x + coord.y), 2.), 0.9);\n        // imitiation of shadowblur\n        vec2 uvCell = fract(uv * numCells);\n        vec2 d = abs(uvCell - vec2(0.5));\n        val += smoothstep(0.95, 1., max(d.x, d.y)*2.);\n        \n        val = clamp(val, 0., 1.);\n        return vec3(val * 0.5, 0., 0.);\n      }"))}}function Ee(e,n){return function(){var t=p()(e),r=~~te(6,10,t()),o=ce(te(.005,.04,Math.pow(t(),2))/r,Math.pow(2,9)),a=_(t,["","uv.x = 1. - uv.x;"]);return le(n,"\n      // from https://iquilezles.org/articles/distfunctions2d/\n      float sdRoundBox(in vec2 p, in vec2 b, in vec4 r) {\n        r.xy = (p.x>0.0)?r.xy : r.zw;\n        r.x  = (p.y>0.0)?r.x  : r.y;\n        vec2 q = abs(p)-b+r.x;\n        return min(max(q.x,q.y),0.0) + length(max(q,0.0)) - r.x;\n      } \n      \n      vec3 gen_val(vec2 uv) {\n        float numCells = ".concat(ie(r),";\n        float borderWidth = ").concat(ie(n),";\n        float lw = ").concat(ie(o),";\n        ").concat(a,"\n        \n        uv = (uv - vec2(borderWidth)) / (1. - 2. * vec2(borderWidth));\n        uv = floor(uv * 4096.) / 4096.;\n\n        vec2 coord = floor(uv * numCells);\n        \n        float lightCell = (1. - step(mod(coord.x + coord.y, 2.), 0.9));\n        vec2 uvCell = fract(uv * numCells);\n        uvCell = mix(1. - uvCell, uvCell, lightCell);\n\n        lw = lw * numCells / 2.;\n\n        const float cg = pow(10., 7.);\n        lw = floor(lw * cg) / cg;\n        \n        float left = 1. - smoothstep(lw, lw + 0.05, uvCell.x);\n        left = floor(left * cg) / cg;\n        float right = 1. - smoothstep(lw, lw + 0.05, uvCell.y);\n        right = floor(right * cg) / cg;\n        float corner = 1. - smoothstep(lw, lw + 0.05, distance(uvCell, vec2(1.)));\n        corner = floor(corner * cg) / cg;\n        \n        float val = min(1., left + right + corner);\n        \n        return vec3(val * 0.5, 0., 0.);\n      }"))}}function Ae(e){if("#"!==e[0]&&(e="#"+e),7!==e.length)throw new Error("invalid string");var n=[e.slice(1,3),e.slice(3,5),e.slice(5,7)].map((function(e){return parseInt(e,16)/255}));return[n[0],n[1],n[2]]}var Te="#version 300 es\n  precision highp float;\n  in vec4 aPos;\n  out vec2 v_uv;\n  void main() {\n    v_uv = (aPos.xy + 1.) / 2.;\n    gl_Position = vec4(aPos.x, aPos.y, 0., 1.);\n  }\n",Re="#version 300 es\n  precision highp float;\n  uniform sampler2D u_buffer;\n  uniform vec3 u_c1;\n  uniform vec3 u_c2;\n  uniform vec3 u_c3;\n  uniform vec3 u_background;\n  in vec2 v_uv;\n  out vec4 out_color;  \n\n  // anything > will be rendered as if it was max_amount\n  // Could potentially instead examine the texture after our initialSteps, and figure\n  // out what should be max_amount from that.\n  const vec3 max_amount = vec3(4.);\n\n  void main() {\n    vec3 amount = texture(u_buffer, v_uv).rgb;\n    vec3 pct = amount / max_amount;\n    pct = clamp(pct, 0., 1.);\n    float maxXy = max(pct.x, pct.y);\n    float maxPct = max(pct.z, maxXy);\n\n    // by adjusting power here, we can get thicker/thinner lines\n    // pct = pow(pct, vec3(0.8, 3., 1.));\n    \n    vec3 col = u_background;\n\n    // avoid dividing by zero\n    if (maxPct > 0.) {    \n      // Not sure if there are better approaches for blending, but this works ok\n      \n      vec3 c12 = maxXy == 0. ? u_c1 : mix(u_c1, u_c2, pct.y / (pct.x + pct.y));\n      vec3 c123 = mix(c12, u_c3, pct.z / (pct.x + pct.y + pct.z));\n      col = mix(col, c123, maxPct);\n    }\n\n    out_color = vec4(col, 1.);\n  }\n",Fe=function(){function e(n,t,r,o){var a=o.decayFactor,i=o.diffuseEnabled,u=o.landscapeBorder,c=o.landscapeType,f=o.palette;s(this,e),this.gl=n,this.frame=0,this.depositor=void 0,this.diffuser=void 0,this.landscaper=void 0,this.screenDrawer=void 0,this.depositor=function(e,n){var t=q(e,n,(function(){var t=N(e);return e.texImage2D.apply(e,[e.TEXTURE_2D,0,e.getExtension("EXT_float_blend")?e.RGBA32F:e.RGBA16F].concat(l(n),[0,e.RGBA,e.FLOAT,null])),t})),r=e.createBuffer(),o=W(e,J,Q);e.useProgram(o),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,3,-1,-1,3,-1]),e.STATIC_DRAW);var a={u_amount:H(e,o,"u_amount"),u_buffer:H(e,o,"u_buffer"),u_dim:H(e,o,"u_dim"),u_dim_screen:H(e,o,"u_dim_screen"),u_point_size:H(e,o,"u_point_size")};return e.uniform1i(a.u_buffer,0),e.uniform2f(a.u_dim_screen,t.width,t.height),{get texture(){return t.texture},clear:function(){e.bindFramebuffer(e.FRAMEBUFFER,t.fbo),e.viewport(0,0,t.width,t.height),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)},applyAgentLayer:function(n){e.bindBuffer(e.ARRAY_BUFFER,r),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(0),e.useProgram(o),e.uniform2f.apply(e,[a.u_dim].concat(l(n.extant))),e.uniform3f.apply(e,[a.u_amount].concat(l(n.deposit))),e.uniform1f(a.u_point_size,n.pointSize),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,n.texture),e.bindFramebuffer(e.FRAMEBUFFER,t.fbo),e.viewport(0,0,t.width,t.height),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE),e.drawArrays(e.POINTS,0,n.numAgents),e.disable(e.BLEND)},debug:function(){e.bindFramebuffer(e.FRAMEBUFFER,t.fbo);var n=new Float32Array(t.width*t.height*4);e.readPixels(0,0,t.width,t.height,e.RGBA,e.FLOAT,n);var r=K(n.join(","));return $(r,"dep"),r}}}(n,r),this.diffuser=function(e,n,t){var r=t.decay,o=t.diffuse,a=Y(e,n,null),i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),e.STATIC_DRAW);var u=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,u),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),e.STATIC_DRAW);var c=W(e,Z,ee(o));e.useProgram(c);var f={u_prev:e.getUniformLocation(c,"u_prev"),u_deposit:e.getUniformLocation(c,"u_deposit"),u_texsize:e.getUniformLocation(c,"u_texsize"),u_decay:e.getUniformLocation(c,"u_decay"),u_landscape:e.getUniformLocation(c,"u_landscape"),u_hack:e.getUniformLocation(c,"u_hack")};return e.uniform2f(f.u_texsize,1/n[0],1/n[1]),e.uniform1i(f.u_prev,0),e.uniform1i(f.u_deposit,1),e.uniform1i(f.u_landscape,2),{update:function(n,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.bindFramebuffer(e.FRAMEBUFFER,a.dest.fbo),e.bindBuffer(e.ARRAY_BUFFER,i),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,u),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(0),e.useProgram(c),e.uniform1i(f.u_hack,o?1:0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,a.src.texture),e.uniform1i(f.u_prev,0),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,t),e.uniform1i(f.u_deposit,1),e.uniform1f(f.u_decay,1-r),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,n),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),a.swap()},debug:function(){e.bindFramebuffer(e.FRAMEBUFFER,a.src.fbo);var n=new Float32Array(a.width*a.height*4);e.readPixels(0,0,a.width,a.height,e.RGBA,e.FLOAT,n);var t=K(n.join(","));return $(t,"dif"),t},get fbo(){return a.src}}}(n,r,{decay:a,diffuse:i}),this.landscaper=fe(n,r,t,c,u),void 0!==window.lastStep&&this.landscaper.debug(),this.screenDrawer=function(e,n){var t=n.background,r=n.color1,o=n.color2,a=n.color3,i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),e.STATIC_DRAW);var u=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,u),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),e.STATIC_DRAW);var c=W(e,Te,Re);e.useProgram(c);var f={u_buffer:e.getUniformLocation(c,"u_buffer"),u_c1:e.getUniformLocation(c,"u_c1"),u_c2:e.getUniformLocation(c,"u_c2"),u_c3:e.getUniformLocation(c,"u_c3"),u_background:e.getUniformLocation(c,"u_background")};return e.uniform3f.apply(e,[f.u_c1].concat(l(Ae(r)))),e.uniform3f.apply(e,[f.u_c2].concat(l(Ae(o)))),e.uniform3f.apply(e,[f.u_c3].concat(l(Ae(a)))),e.uniform3f.apply(e,[f.u_background].concat(l(Ae(t)))),{draw:function(n){e.useProgram(c),e.bindFramebuffer(e.FRAMEBUFFER,null),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.bindBuffer(e.ARRAY_BUFFER,i),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,u),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,n),e.uniform1i(f.u_buffer,0),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}}}(n,f)}return v(e,[{key:"texture",get:function(){return this.diffuser.fbo.texture}},{key:"landscape",get:function(){return this.landscaper.texture}},{key:"update",value:function(e){var n=this;if(e.length>3)throw new Error(" too many layers");this.frame++,this.depositor.clear(),e.forEach((function(e){n.depositor.applyAgentLayer(e)})),this.diffuser.update(this.landscaper.texture,this.depositor.texture,this.frame===window.lastStep),this.frame===window.lastStep&&(this.depositor.debug(),this.diffuser.debug())}},{key:"drawToCanvas",value:function(e){var n=e.canvas,t=n.width,r=n.height;this.screenDrawer.draw(this.diffuser.fbo.texture),e.drawImage(this.gl.canvas,0,0,t,r)}},{key:"debug",value:function(){return{diffuse:this.diffuser.debug(),land:this.landscaper.debug()}}}]),e}();function Ue(e,n,t,r){var o=r.sensorOffset,a=r.deposit,i=r.pointSize,u=r.stepSize,c=r.sensorAngle,f=r.rotationAmount,s=r.landScale,d=r.texScale,v=p()(u.toString()+o.toString()+a.join(",")),h=Math.ceil(Math.sqrt(t.length)),m=Math.ceil(t.length/h),g=Y(e,[h,m],(function(){return function(e,n,t,r){for(var o=new Float32Array(r*t*4),a=0;a<n.length;a++){var i=w(n[a],3),u=i[0],c=i[1],f=i[2];o[4*a+0]=u,o[4*a+1]=c,o[4*a+2]=re(f,2*Math.PI),o[4*a+3]=0}e.activeTexture(e.TEXTURE0+0);var l=N(e);return e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,t,r,0,e.RGBA,e.FLOAT,o),l}(e,t,h,m)})),b=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,b),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,3,-1,-1,3,-1]),e.STATIC_DRAW);var _=ae(e,512),y=W(e,De,Se.replace("//insert-sincos",_.glsl)),x={u_buffer:H(e,y,"u_buffer"),u_trail:H(e,y,"u_trail"),u_sincos:H(e,y,"u_sincos"),u_trail_dim:H(e,y,"u_trail_dim"),u_landscape:H(e,y,"u_landscape"),u_sensor_offset:H(e,y,"u_sensor_offset"),u_step_size:H(e,y,"u_step_size"),u_sensor_angle:H(e,y,"u_sensor_angle"),u_rotation_amount:H(e,y,"u_rotation_amount"),u_tex_scale:H(e,y,"u_tex_scale"),u_land_scale:H(e,y,"u_land_scale"),u_rand_dir:H(e,y,"u_rand_dir")};return e.useProgram(y),e.uniform1i(x.u_buffer,0),e.uniform1i(x.u_trail,1),e.uniform1i(x.u_landscape,2),e.uniform1i(x.u_sincos,3),e.uniform2f.apply(e,[x.u_trail_dim].concat(l(n))),e.uniform1f(x.u_sensor_offset,o),e.uniform1f(x.u_step_size,u),e.uniform1f(x.u_sensor_angle,c*Math.PI),e.uniform1f(x.u_rotation_amount,f*Math.PI),e.uniform3f.apply(e,[x.u_tex_scale].concat(l(d))),e.uniform3f.apply(e,[x.u_land_scale].concat(l(s))),{get texture(){return g.src.texture},get extant(){return[g.width,g.height]},get numAgents(){return t.length},get deposit(){return a},get pointSize(){return null!==i&&void 0!==i?i:1},get length(){return t.length},update:function(n,t){e.bindBuffer(e.ARRAY_BUFFER,b),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(0),e.useProgram(y),e.bindFramebuffer(e.FRAMEBUFFER,g.dest.fbo),e.uniform1f(x.u_rand_dir,v()<.5?1:-1),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,g.src.texture),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,n),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE3),e.bindTexture(e.TEXTURE_2D,_.texture),e.viewport(0,0,g.width,g.height),e.drawArrays(e.TRIANGLES,0,3),g.swap()},debug:function(){e.bindFramebuffer(e.FRAMEBUFFER,g.src.fbo);var n=new Float32Array(g.width*g.height*4);e.readPixels(0,0,g.width,g.height,e.RGBA,e.FLOAT,n);var t=K(n.join(","));return $(t,"age"),t}}}var De="#version 300 es\n  precision highp float;\n  in vec4 aPos;\n  out vec2 v_uv;\n  void main() {\n    v_uv = (aPos.xy + 1.) / 2.;\n    gl_Position = vec4(aPos.x, aPos.y, 0., 1.);\n  }\n",Se='#version 300 es\n  precision highp float;\n  uniform sampler2D u_buffer;\n  uniform sampler2D u_trail;\n  uniform sampler2D u_sincos;\n  uniform sampler2D u_landscape;\n  uniform vec2 u_trail_dim;\n  // smaller numbers lead to small "cells"\n  uniform float u_sensor_offset;\n  uniform float u_step_size;\n  // very small, and agent will often get idential readings across sensors\n  uniform float u_sensor_angle;\n  // changing this can change the shapes of what is generated\n  uniform float u_rotation_amount;\n  uniform vec3 u_tex_scale;\n  uniform vec3 u_land_scale;\n  uniform float u_rand_dir;\n  \n  in vec2 v_uv;\n  out vec4 out_color;\n\n  //insert-sincos\n\n  vec2 polarize(vec2 v, float angle, float mag) {\n    // decrease precision, to improve consistency across hardware\n    return v  + floor(vec2(cos2(angle), sin2(angle)) * mag * 1024.) / 1024.;\n  }\n\n  float sum(vec3 v) { return v.x + v.y + v.z; }\n\n  const float cg = pow(2., 11.);\n\n  float trail(vec2 pos) {\n    vec2 uv = pos / u_trail_dim;\n    if (fract(uv) != uv) {\n      return 0.;\n    }\n    // center of pixel\n    uv = (floor(uv * u_trail_dim) + 0.5) / u_trail_dim;\n\n    // could be interesting? to penalize a tex value that\'s too high \n    // (i.e. something like attracted to val < n, but turned away for val > n)\n    vec3 tex = texture(u_trail, uv).rgb;\n    vec3 land = texture(u_landscape, uv).rgb;\n    \n    return sum(u_tex_scale * tex) + sum(u_land_scale * land);\n  }\n  \n  void main() {\n    vec4 tex = texture(u_buffer, v_uv);\n    vec2 pos = tex.xy;\n    float angle = tex.z;\n\n    vec2 agent_uv = pos / u_trail_dim;\n\n    // all things that could be varied more - either per agent, per location,\n    // or randomly\n    float stepsize = u_step_size;\n    float sensor_offset = u_sensor_offset;\n    float sensor_angle = u_sensor_angle;\n    float rotation_amount = u_rotation_amount;\n    \n    vec2 lp = polarize(pos, angle - sensor_angle, sensor_offset);\n    vec2 cp = polarize(pos, angle, sensor_offset);\n    vec2 rp = polarize(pos, angle + sensor_angle, sensor_offset);\n\n    float left = trail(lp);\n    float center = trail(cp);\n    float right = trail(rp);\n    \n    float next_angle = angle;\n    if (center > left && center > right) { \n      // noop\n    } else if (center < left && center < right) {\n      next_angle += rotation_amount * u_rand_dir;\n    } else if (left < right) {\n      next_angle += rotation_amount;\n    } else if (right < left) {  \n      next_angle -= rotation_amount;\n    } else {\n      // stay in same direction\n    }\n\n    next_angle = mod(next_angle + TAU, TAU);\n    \n    vec2 next_pos = polarize(pos, next_angle, stepsize);\n    \n    // if next pos is out of bounds, stay in place and turn around. could play\n    // with other values of how much we rotate here\n    if (next_pos.x < 0. || next_pos.y < 0.\n        || next_pos.x >= u_trail_dim.x || next_pos.y >= u_trail_dim.y) {\n      next_pos = pos;\n      next_angle += PI;\n    }\n    \n    out_color = vec4(next_pos, next_angle, 1.);\n  }\n',Pe=2*Math.PI;var Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(n,t,r){var o=[t[0]*e,t[0]*(1-e)],a=[t[1]*e,t[1]*(1-e)];return Array.from({length:r},(function(){var e=[te.apply(void 0,o.concat([n()])),te.apply(void 0,a.concat([n()]))];return[e[0],e[1],n()*Pe]}))}},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.3;return function(n,t,r){return Array.from({length:r},(function(){var r=n()*Pe,o=oe([t[0]/2,t[1]/2],r+Math.PI,t[0]*(.1+x(n,e)));return[].concat(l(o),[r])}))}},Ce=function(){return function(e,n,t){var r=e()<.5,o=e()<.3||!0,a=te(.05,.2,Math.pow(e(),.5));o&&(a*=2);var i=function(e){var n,t,r,a=re(e+(o?.5:0),1);return n=a,t=0,r=1,n=Math.min(r,n),Math.max(t,n)};return Array.from({length:t},(function(){return[r?n[0]*i(.5+x(e,a)):n[0]*e(),r?e()*n[1]:n[1]*i(.5+x(e,a)),e()*Pe]}))}},ke=function(e){var n=(0,ne.DA)(e),t=function(e,t,r){return(n(e*r,t*r)+1)/2},r=function(e,n,r){var o=t.apply(void 0,l(e).concat([r]));return oe(e,Pe*o*3,n)};return function(e,n,o){var a=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(2*e()-1)*n},i=te(2,6,e()),u=te(1,5,e()),c=te(5,20,e());return Array.from({length:o},(function(){for(var o=[e(),e()],f=0;f<c;f++)o=r(o,u/n[0],i);return[o[0]*n[0]+a(2*u),o[1]*n[1]+a(2*u),t.apply(void 0,l(o).concat([i]))*Pe*3]}))}},Me=function(){return function(e,n,t){var r=te(.1,.5,Math.pow(e(),.5)),o=e()<.5,a=function(e){return Math.min.apply(Math,l(e))>=0&&e[0]<n[0]&&e[1]<n[1]};return Array.from({length:t},(function(){var t;do{var i=e()*n[0];t=oe([i,o?n[1]-i:i],e()*Pe,r*n[0]*e())}while(!a(t));return[].concat(l(t),[e()*Pe])}))}},Oe=[[7,["000411-552f9d-efcb68-e1efe6","000411-000411-e1efe6"]],[10,["423e3b-ff2e00-fea82f-fffecb","423e3b-423e3b-423e3b-fea82f-fffecb"]],[7,["094074-3c6997-5adbff-ffdd4a","094074"]],[10,["000411-d7263d-efcb68-3ab795","000411-d7263d-efcb68-3ab795"]],[10,["042a2b-5eb1bf-cdedf6-ef7b45","042a2b-042a2b-042a2b-5eb1bf-cdedf6"]],[6,["606c38-283618-fefae0-dda15e","606c38-283618-fefae0-dda15e"]],[5,["413620-9c6615-9f7833-ffd791","413620-9c6615-9f7833-ffd791"]],[15,["001427-708d81-f4d58d-bf0603","001427-708d81-f4d58d-bf0603"]],[12,["050505-1b9aaa-dddbcb-f5f1e3","050505-1b9aaa-dddbcb-f5f1e3"]],[3,["002500-b7245c-929982-edcbb1","002500"]],[4,["3f0d12-f1f0cc-d5bf86-8d775f","3f0d12-f1f0cc-d5bf86-8d775f"]],[8,["083d77-ebebd3-da4167-f4d35e-f78764","083d77-083d77-083d77-ebebd3-ebebd3"]],[10,["14281d-355834-6e633d-c2a878","14281d-14281d-6e633d-c2a878-c2a878"]],[3,["271f30-6c5a49-c8ad55-d0fcb3","271f30"]],[10,["004777-a30000-ff7700-efd28d","004777-a30000-ff7700-004777-a30000-ff7700-efd28d"]],[10,["353535-3c6e71-f2f8f8-d9d9d9","353535-3c6e71-f2f8f8-d9d9d9"]],[10,["2e1f27-854d27-dd7230-f4c95d","2e1f27-854d27-dd7230-f4c95d"]],[10,["606c38-283618-fefae0-dda15e","606c38-283618-fefae0-dda15e"]],[7,["561643-6c0e23-c42021-f3ffb9","c42021-f3ffb9"]],[10,["4e598c-ffffff-f9c784-fcaf58","4e598c-4e598c-ffffff"]],[8,["083d77-ebebd3-da4167-f4d35e","083d77-ebebd3"]],[8,["0d0a0b-454955-f3eff5-72b01d","0d0a0b-454955-f3eff5"]],[6,["ee4266-2a1e5c-0a0f0d-c4cbca","2a1e5c-0a0f0d-c4cbca"]],[10,["fffcf2-ccc5b9-403d39-252422","fffcf2-ccc5b9-403d39-252422"]],[6,["da9f93-eef36a-95b8d1-0d1b1e","0d1b1e"]],[10,["d5573b-f7dba7-1e2d2f-4281a4","d5573b-f7dba7-1e2d2f-4281a4"]],[10,["000500-362417-92817a-f1dabf","000500-362417-92817a-f1dabf"]],[10,["660000-086788-f0c808-fff1d0","660000-086788-f0c808-fff1d0"]],[10,["052f5f-06a77d-d5c67a-f1a208","052f5f-d5c67a-f1a208"]]],je={"000411":"Jaguar","552f9d":"Daisy Bush",efcb68:"Arylide Yellow",e1efe6:"Swans Down","423e3b":"Armadillo",ff2e00:"Ferrari Red",fea82f:"Sea Buckthorn",fffecb:"Lemon Chiffon","094074":"Dark Cerulean","3c6997":"Calypso","5adbff":"Turquoise Blue",ffdd4a:"Mustard",d7263d:"Alizarin Crimson","3ab795":"Keppel","042a2b":"Daintree","5eb1bf":"Fountain Blue",cdedf6:"Onahau",ef7b45:"Jaffa","606c38":"Dark Olive Green",283618:"Mallard",fefae0:"Gin Fizz",dda15e:"Di Serria",413620:"Lisbon Brown","9c6615":"Golden Brown","9f7833":"Luxor Gold",ffd791:"Salomie","001427":"Black Pearl","708d81":"Blue Smoke",f4d58d:"Chalky",bf0603:"Guardsman Red","050505":"Black","1b9aaa":"Eastern Blue",dddbcb:"Moon Mist",f5f1e3:"Ecru White","002500":"Deep Fir",b7245c:"Rich Maroon",929982:"Artichoke",edcbb1:"Desert Sand","3f0d12":"Aubergine",f1f0cc:"Wheatfield",d5bf86:"Straw","8d775f":"Domino","083d77":"Dark Cerulean",ebebd3:"White Rock",da4167:"Cabaret",f4d35e:"Naples Yellow",f78764:"Salmon","14281d":"Dark Jungle Green",355834:"Hunter Green","6e633d":"Yellow Metal",c2a878:"Ecru","271f30":"Bastille","6c5a49":"Tobacco Brown",c8ad55:"Vegas Gold",d0fcb3:"Gossip","004777":"Dark Cerulean",a30000:"Dark Candy Apple Red",ff7700:"Flush Orange",efd28d:"Chalky",353535:"Tuatara","3c6e71":"William",f2f8f8:"Black Squeeze",d9d9d9:"Alto","2e1f27":"Cocoa Brown","854d27":"Bull Shot",dd7230:"Deep Carrot Orange",f4c95d:"Cream Can",561643:"Wine Berry","6c0e23":"Black Rose",c42021:"Fire Engine Red",f3ffb9:"Australian Mint","4e598c":"UCLA Blue",ffffff:"White",f9c784:"Chardonnay",fcaf58:"Texas Rose","0d0a0b":"Cod Gray",454955:"Mako",f3eff5:"Anti-flash White","72b01d":"Lima",ee4266:"Mandy","2a1e5c":"Port Gore","0a0f0d":"Woodsmoke",c4cbca:"Pumice",fffcf2:"Orchid White",ccc5b9:"Foggy Gray","403d39":"Masala",252422:"Log Cabin",da9f93:"Petite Orchid",eef36a:"Canary","95b8d1":"Dark Sky Blue","0d1b1e":"Aztec",d5573b:"Flame Pea",f7dba7:"Deep Champagne","1e2d2f":"Charleston Green","4281a4":"Wedgewood","000500":"Black",362417:"Sambuca","92817a":"Squirrel",f1dabf:"Almond",66e4:"Blood Red","086788":"Orient",f0c808:"Corn",fff1d0:"Oasis","052f5f":"Cool Black","06a77d":"Gossamer",d5c67a:"Chenin",f1a208:"California"};function Ie(e){var n;return null!==(n=je[e])&&void 0!==n?n:e}function ze(e){var n,t=y(e,Oe),r=(null!==(n=t[1])&&void 0!==n?n:t[0]).split("-"),o=_(e,r),a=b(e,t[0].split("-").filter((function(e){return e!==o}))),i=a[0],u=w(a.slice(1),2),c=u[0],f=u[1];return e()<.1&&(c=i),e()<.1&&(c=o),e()<.1&&(f=i),{background:o,color1:i,color2:c,color3:f}}var Ge=function(){function e(n,t){s(this,e),this.agentLayers=void 0,this.trail=void 0,this.frame=0,this.seed=void 0,this.seed=t.seed;var r=this.createGL(n),o=p()(this.seed),a=function(e,n,t){var r=p()(e),o=b(r,y(r,[[10,[Be(),Be(),Be()]],[15,[Le(te(.15,.4,r())),Be(),Be()]],[6,[Le(.4),Be(te(.1,.2,r())),Be()]],[7,function(){var e=te(.05,.12,r()),n=[1,2,3];return[Be(e*n[0]),Be(e*n[1]),Be(e*n[2])]}()],[10,function(){var e=r()<.25?1:te(1.5,2,r()),t=r()<.25?1:te(1.5,2,r()),o=w(b(r,[0,n[0]]),2),a=o[0],i=o[1],u=[0,n[1]],c=u[0],f=u[1];return[function(n,r,o){return Array.from({length:o},(function(){return[te(a,i,Math.pow(n(),e)),te(c,f,Math.pow(n(),t)),Pe*n()]}))},function(n,r,o){return Array.from({length:o},(function(){return[te(i,a,Math.pow(n(),e)),te(f,c,Math.pow(n(),t)),Pe*n()]}))},Be()]}()],[10,[ke(1e4*r()),r()<.6?Be():ke(1e4*r()),r()<.6?Be():ke(1e4*r())]],[10,[Ce(),r()<0?Be():Ce(),r()<0?Be():Ce()]],[30,[_(r,[Me(),Le(te(.15,.4,r())),Be(),Be(),ke(1e4*r()),Ce()]),_(r,[Me(),Le(te(.15,.4,r())),Be(),Be(),ke(1e4*r()),Ce()]),_(r,[Me(),Le(te(.15,.4,r())),Be(),Be(),ke(1e4*r()),Ce()])]]])),a=b(r,y(r,[[10,[3,15,7]],[5,[10,10,10]],[5,[5,5,5]],[2,[20,20,20]],[10,[3,6,9]],[10,[5,10,15]],[10,[5,5,15]],[10,[8,11,14]]])),i=_(r,[1/8,1/4,.5,3/4]),u=y(r,[[10,[[1,-i,0],[0,1,-i],[-i,0,1]]],[10,[[1,-i,0],[-i,1,0],[-i,-i,2]]],[10,[[1,-1,0],[i,1,0],[-i,-i,2]]],[10,[[2,-i,-i],[-i,2,-i],[-i,-i,2]]]]),c=[0,1,2];t&&0===(c=b(r,c))[0]&&1===c[1]&&2===c[2]&&(c=[1,2,0]);var f=[u[c[0]],u[c[1]],u[c[2]]],l=_(r,[25,50,100]),s=y(r,[[12,[l,l,l]],[6,[-l,-l,-l]],[8,[l*_(r,[1,-1]),l*_(r,[1,-1]),l*_(r,[1,-1])]]]);return o.map((function(t,o){var i;return{agentData:t(p()(e+o.toString()),n,~~(n[0]*n[1]*y(r,[[10,.02],[5,.03],[3,.04],[1,.05]]))),options:{pointSize:1,stepSize:y(r,[[3,.5],[10,1],[2,1.5],[1,2]]),landScale:[s[o],0,0],rotationAmount:y(r,[[10,.25],[3,.125],[1,.0625]]),sensorAngle:y(r,[[3,.5],[10,.25],[5,.125]]),deposit:Array.from({length:3},(function(e,n){return o===n?1:0})),sensorOffset:(i=a[o],i/1024*n[0]),texScale:f[o]}}}))}(this.seed,n,t.jumbledAttraction);this.agentLayers=a.map((function(e){var t=e.agentData,o=e.options;return Ue(r,n,t,o)})),this.trail=new Fe(r,o,n,{decayFactor:4/128,diffuseEnabled:t.diffuseEnabled,landscapeBorder:t.landscapeBorder,landscapeType:t.landscapeType,palette:t.palette})}return v(e,[{key:"createGL",value:function(e){var n=g.apply(void 0,l(e));return n.getExtension("EXT_color_buffer_float"),n.pixelStorei(n.UNPACK_ALIGNMENT,1),n}},{key:"update",value:function(){this.frame++;var e=this.agentLayers,n=this.trail;e.forEach((function(e){return e.update(n.texture,n.landscape)})),this.frame===window.lastStep&&e.slice(0).forEach((function(e){return e.debug()})),n.update(e)}},{key:"draw",value:function(e){this.trail.drawToCanvas(e)}},{key:"debug",value:function(){return{agents:this.agentLayers.map((function(e){return e.debug()})),trail:this.trail.debug()}}}],[{key:"createOptions",value:function(e){var n=p()(e);return{seed:e,diffuseEnabled:n()<.4,landscapeType:y(n,[[10,"radial gradient"],[12,"noise"],[2.5,"central circle"],[6,"central square"],[6,"corner circles"],[10,"lines"],[20,"grid"],[10,"linear gradient"],[10,"triangles"],[10,"grid circles"],[10,"sin waves"],[5,"checkerboard"],[7,"steps"]]),palette:ze(n),jumbledAttraction:n()<.06,landscapeBorder:n()<.8}}}]),e}(),We=[2048,2048],Xe=[.5*We[0],.5*We[1]],Ne=300;function qe(){var e;return e=n().mark((function e(){var t,r,o,a,u,c,f,l,s,d,v,h;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.location.host.includes("localhost"),r=new URLSearchParams(window.location.search),o=r.get("seed"),a=o||window.$fx.hash||Date.now().toString(),u="true"===r.get("fresh"),c="true"===r.get("animate"),f=document.getElementById("root")){e.next=9;break}throw new Error("missing root");case 9:l=m.apply(void 0,We.concat([{},f])),s=Ge.createOptions(a),d=new Ge(Xe,i({},s)),window.$fx.features({background:Ie(s.palette.background),communities:[s.palette.color1,s.palette.color2,s.palette.color3].sort().map(Ie).join(", "),diffusion:s.diffuseEnabled,landscape:s.landscapeType,border:s.landscapeBorder,"jumbled attraction":s.jumbledAttraction}),v=function(e){for(var n=0;n<e;n++)d.update();d.draw(l)},u||c||v(Ne),window.$fx.isPreview&&window.$fx.preview(),h=!u&&!c,setInterval((function(){h||(v(1),d.frame!==Ne||c||(h=!0))}),40),document.addEventListener("keydown",(function(e){if("Space"===e.code&&(h=!h,console.log("paused: ",h)),"KeyF"===e.code&&(u?r.delete("fresh"):r.set("fresh","true"),t&&!r.get("seed")&&r.set("seed",a),window.location.search=r.toString()),"ArrowRight"===e.code&&(console.log("step"),v(1)),"KeyA"===e.code&&(c?r.delete("animate"):r.set("animate","true"),t&&!r.get("seed")&&r.set("seed",a),window.location.search=r.toString()),"KeyL"===e.code){var n=document.getElementById("l");if(!n)return;"none"===n.style.display?n.style.display="block":n.style.display="none"}if("KeyS"===e.code){var o=l.canvas.toDataURL("image/png").replace("image/png","image/octet-stream"),i=document.createElement("a");i.href=o,i.setAttribute("download","follow_my_lead.png"),i.click()}})),document.addEventListener("touchstart",(function(){h=!h,console.log("paused: ",h)}));case 21:case"end":return e.stop()}}),e)})),qe=function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){u(a,r,o,i,c,"next",e)}function c(e){u(a,r,o,i,c,"throw",e)}i(void 0)}))},qe.apply(this,arguments)}!function(){qe.apply(this,arguments)}()}()}();